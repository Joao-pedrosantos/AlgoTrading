<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üìà Analisador Avan√ßado de A√ß√µes - YFinance</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }

        h1 {
            text-align: center;
            color: #764ba2;
            margin-bottom: 10px;
            font-size: 2.5em;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
        }

        .subtitle {
            text-align: center;
            color: #666;
            margin-bottom: 30px;
            font-style: italic;
        }

        .warning {
            background: linear-gradient(135deg, #ff6b6b, #ff8e53);
            color: white;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
            text-align: center;
            font-weight: bold;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.02); }
        }

        .controls {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .control-group {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            padding: 15px;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        label {
            display: block;
            margin-bottom: 5px;
            color: #333;
            font-weight: 600;
        }

        input, select {
            width: 100%;
            padding: 10px;
            border: 2px solid #ddd;
            border-radius: 5px;
            font-size: 14px;
            transition: all 0.3s;
        }

        input:focus, select:focus {
            border-color: #764ba2;
            outline: none;
            box-shadow: 0 0 10px rgba(118, 75, 162, 0.2);
        }

        button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 25px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 4px 15px rgba(118, 75, 162, 0.3);
        }

        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(118, 75, 162, 0.4);
        }

        button:active {
            transform: translateY(0);
        }

        .results {
            display: none;
            margin-top: 30px;
        }

        .result-card {
            background: white;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            animation: slideIn 0.5s ease-out;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .result-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid #f0f0f0;
        }

        .result-title {
            font-size: 1.3em;
            color: #333;
            font-weight: bold;
        }

        .score {
            font-size: 2em;
            font-weight: bold;
            padding: 10px 20px;
            border-radius: 10px;
            animation: scoreAnimation 1s ease-out;
        }

        @keyframes scoreAnimation {
            from { transform: scale(0); }
            to { transform: scale(1); }
        }

        .score.high { 
            background: linear-gradient(135deg, #00b09b, #96c93d);
            color: white;
        }
        .score.medium { 
            background: linear-gradient(135deg, #ffd89b, #19547b);
            color: white;
        }
        .score.low { 
            background: linear-gradient(135deg, #ff758c, #ff7eb3);
            color: white;
        }

        .indicators {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }

        .indicator {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 10px;
            border-left: 4px solid #764ba2;
            transition: all 0.3s;
        }

        .indicator:hover {
            transform: translateX(5px);
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
        }

        .indicator-name {
            font-weight: 600;
            color: #555;
            margin-bottom: 5px;
        }

        .indicator-value {
            font-size: 1.2em;
            color: #333;
        }

        .signal {
            display: inline-block;
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 0.9em;
            font-weight: bold;
            margin-left: 10px;
        }

        .signal.buy {
            background: #00b09b;
            color: white;
        }

        .signal.sell {
            background: #ff758c;
            color: white;
        }

        .signal.hold {
            background: #ffd89b;
            color: #333;
        }

        .loading {
            text-align: center;
            padding: 40px;
            font-size: 1.2em;
            color: #666;
        }

        .loading::after {
            content: '...';
            animation: dots 1.5s infinite;
        }

        @keyframes dots {
            0%, 20% { content: '.'; }
            40% { content: '..'; }
            60%, 100% { content: '...'; }
        }

        .strategy-section {
            background: linear-gradient(135deg, #e0c3fc 0%, #8ec5fc 100%);
            padding: 20px;
            border-radius: 15px;
            margin-top: 20px;
        }

        .strategy-title {
            font-size: 1.2em;
            font-weight: bold;
            color: #333;
            margin-bottom: 15px;
        }

        .recommendation {
            background: white;
            padding: 15px;
            border-radius: 10px;
            margin-top: 10px;
            border-left: 5px solid #764ba2;
        }

        .price-info {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 10px;
            margin: 15px 0;
        }

        .price-item {
            text-align: center;
            padding: 10px;
            background: #f0f0f0;
            border-radius: 8px;
        }

        .price-label {
            font-size: 0.9em;
            color: #666;
            margin-bottom: 5px;
        }

        .price-value {
            font-size: 1.3em;
            font-weight: bold;
            color: #333;
        }

        .trend-indicator {
            font-size: 1.5em;
            margin-left: 5px;
        }

        .footer {
            text-align: center;
            margin-top: 30px;
            padding-top: 20px;
            border-top: 2px solid #f0f0f0;
            color: #666;
            font-size: 0.9em;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üìà Analisador Avan√ßado de A√ß√µes</h1>
        <p class="subtitle">An√°lise T√©cnica Inteligente com Indicadores Profissionais</p>
        
        <div class="warning">
            ‚ö†Ô∏è AVISO: Este √© um c√≥digo educacional. Investimentos envolvem riscos. Sempre fa√ßa sua pr√≥pria pesquisa e consulte profissionais.
        </div>

        <div class="controls">
            <div class="control-group">
                <label for="ticker">S√≠mbolo da A√ß√£o:</label>
                <input type="text" id="ticker" placeholder="Ex: AAPL, PETR4.SA, MGLU3.SA" value="AAPL">
            </div>
            
            <div class="control-group">
                <label for="period">Per√≠odo de An√°lise:</label>
                <select id="period">
                    <option value="1mo">1 M√™s</option>
                    <option value="3mo" selected>3 Meses</option>
                    <option value="6mo">6 Meses</option>
                    <option value="1y">1 Ano</option>
                    <option value="2y">2 Anos</option>
                </select>
            </div>
            
            <div class="control-group">
                <label for="strategy">Estrat√©gia:</label>
                <select id="strategy">
                    <option value="conservative">Conservadora</option>
                    <option value="moderate" selected>Moderada</option>
                    <option value="aggressive">Agressiva</option>
                </select>
            </div>
            
            <div class="control-group">
                <label>&nbsp;</label>
                <button onclick="analyzeStock()">üöÄ Analisar A√ß√£o</button>
            </div>
        </div>

        <div id="results" class="results"></div>
        
        <div class="footer">
            <p>üí° Dica: Use este c√≥digo em Python com yfinance para an√°lise real em tempo real</p>
            <p>üìä Indicadores: RSI, MACD, M√©dias M√≥veis, Bollinger Bands, Volume</p>
        </div>
    </div>

    <script>
        // Simula√ß√£o de an√°lise - Em produ√ß√£o, isso seria feito com Python/yfinance no backend
        function analyzeStock() {
            const ticker = document.getElementById('ticker').value.toUpperCase();
            const period = document.getElementById('period').value;
            const strategy = document.getElementById('strategy').value;
            
            if (!ticker) {
                alert('Por favor, insira um s√≠mbolo de a√ß√£o');
                return;
            }
            
            const resultsDiv = document.getElementById('results');
            resultsDiv.style.display = 'block';
            resultsDiv.innerHTML = '<div class="loading">Analisando dados do mercado</div>';
            
            // Simular delay de an√°lise
            setTimeout(() => {
                displayResults(ticker, period, strategy);
            }, 2000);
        }
        
        function displayResults(ticker, period, strategy) {
            // Gerar dados simulados (em produ√ß√£o, viriam do yfinance)
            const currentPrice = (Math.random() * 200 + 50).toFixed(2);
            const openPrice = (currentPrice * (0.95 + Math.random() * 0.1)).toFixed(2);
            const dayHigh = (currentPrice * (1 + Math.random() * 0.05)).toFixed(2);
            const dayLow = (currentPrice * (0.95 + Math.random() * 0.03)).toFixed(2);
            const volume = Math.floor(Math.random() * 10000000) + 1000000;
            
            const rsi = Math.floor(Math.random() * 100);
            const macd = (Math.random() * 10 - 5).toFixed(2);
            const sma20 = (currentPrice * (0.95 + Math.random() * 0.1)).toFixed(2);
            const sma50 = (currentPrice * (0.9 + Math.random() * 0.15)).toFixed(2);
            const bollinger = Math.random() > 0.5 ? 'Acima' : 'Abaixo';
            
            // Calcular score baseado nos indicadores
            let score = 50;
            if (rsi < 30) score += 20;
            else if (rsi > 70) score -= 20;
            if (macd > 0) score += 15;
            if (currentPrice > sma20) score += 10;
            if (currentPrice > sma50) score += 10;
            if (bollinger === 'Abaixo') score += 15;
            
            score = Math.max(0, Math.min(100, score));
            
            const scoreClass = score >= 70 ? 'high' : score >= 40 ? 'medium' : 'low';
            const recommendation = score >= 70 ? 'COMPRA' : score >= 40 ? 'AGUARDAR' : 'VENDA';
            const signal = score >= 70 ? 'buy' : score >= 40 ? 'hold' : 'sell';
            
            const resultsHTML = `
                <div class="result-card">
                    <div class="result-header">
                        <div class="result-title">üìä ${ticker} - An√°lise Completa</div>
                        <div class="score ${scoreClass}">${score}/100</div>
                    </div>
                    
                    <div class="price-info">
                        <div class="price-item">
                            <div class="price-label">Pre√ßo Atual</div>
                            <div class="price-value">$${currentPrice}</div>
                        </div>
                        <div class="price-item">
                            <div class="price-label">Abertura</div>
                            <div class="price-value">$${openPrice}</div>
                        </div>
                        <div class="price-item">
                            <div class="price-label">M√°xima</div>
                            <div class="price-value">$${dayHigh}</div>
                        </div>
                        <div class="price-item">
                            <div class="price-label">M√≠nima</div>
                            <div class="price-value">$${dayLow}</div>
                        </div>
                        <div class="price-item">
                            <div class="price-label">Volume</div>
                            <div class="price-value">${(volume/1000000).toFixed(1)}M</div>
                        </div>
                    </div>
                    
                    <div class="indicators">
                        <div class="indicator">
                            <div class="indicator-name">RSI (14)</div>
                            <div class="indicator-value">${rsi}
                                <span class="signal ${rsi < 30 ? 'buy' : rsi > 70 ? 'sell' : 'hold'}">
                                    ${rsi < 30 ? 'Sobrevendido' : rsi > 70 ? 'Sobrecomprado' : 'Neutro'}
                                </span>
                            </div>
                        </div>
                        
                        <div class="indicator">
                            <div class="indicator-name">MACD</div>
                            <div class="indicator-value">${macd}
                                <span class="signal ${macd > 0 ? 'buy' : 'sell'}">
                                    ${macd > 0 ? 'Bullish' : 'Bearish'}
                                </span>
                            </div>
                        </div>
                        
                        <div class="indicator">
                            <div class="indicator-name">SMA 20</div>
                            <div class="indicator-value">$${sma20}
                                <span class="trend-indicator">${currentPrice > sma20 ? 'üìà' : 'üìâ'}</span>
                            </div>
                        </div>
                        
                        <div class="indicator">
                            <div class="indicator-name">SMA 50</div>
                            <div class="indicator-value">$${sma50}
                                <span class="trend-indicator">${currentPrice > sma50 ? 'üìà' : 'üìâ'}</span>
                            </div>
                        </div>
                        
                        <div class="indicator">
                            <div class="indicator-name">Bollinger Bands</div>
                            <div class="indicator-value">
                                <span class="signal ${bollinger === 'Abaixo' ? 'buy' : 'hold'}">
                                    ${bollinger} da banda
                                </span>
                            </div>
                        </div>
                        
                        <div class="indicator">
                            <div class="indicator-name">Tend√™ncia</div>
                            <div class="indicator-value">
                                <span class="signal ${signal}">${recommendation}</span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="result-card strategy-section">
                    <div class="strategy-title">üéØ Estrat√©gia ${strategy === 'conservative' ? 'Conservadora' : strategy === 'moderate' ? 'Moderada' : 'Agressiva'}</div>
                    <div class="recommendation">
                        <strong>Recomenda√ß√£o:</strong> ${getRecommendation(score, strategy)}<br><br>
                        <strong>Stop Loss Sugerido:</strong> $${(currentPrice * 0.95).toFixed(2)} (-5%)<br>
                        <strong>Take Profit Sugerido:</strong> $${(currentPrice * 1.10).toFixed(2)} (+10%)<br><br>
                        <strong>An√°lise de Risco:</strong> ${getRiskAnalysis(rsi, macd, score)}
                    </div>
                </div>
                
                <div class="result-card">
                    <div class="result-title">üìù C√≥digo Python para An√°lise Real</div>
                    <pre style="background: #f4f4f4; padding: 15px; border-radius: 10px; overflow-x: auto;">
import yfinance as yf
import pandas as pd
import numpy as np
from datetime import datetime, timedelta

# Baixar dados da a√ß√£o
ticker = "${ticker}"
stock = yf.Ticker(ticker)
hist = stock.history(period="${period}")

# Calcular indicadores t√©cnicos
def calculate_rsi(data, window=14):
    delta = data['Close'].diff()
    gain = (delta.where(delta > 0, 0)).rolling(window=window).mean()
    loss = (-delta.where(delta < 0, 0)).rolling(window=window).mean()
    rs = gain / loss
    rsi = 100 - (100 / (1 + rs))
    return rsi

def calculate_macd(data):
    exp1 = data['Close'].ewm(span=12, adjust=False).mean()
    exp2 = data['Close'].ewm(span=26, adjust=False).mean()
    macd = exp1 - exp2
    signal = macd.ewm(span=9, adjust=False).mean()
    return macd, signal

# Aplicar indicadores
hist['RSI'] = calculate_rsi(hist)
hist['MACD'], hist['Signal'] = calculate_macd(hist)
hist['SMA_20'] = hist['Close'].rolling(window=20).mean()
hist['SMA_50'] = hist['Close'].rolling(window=50).mean()

# Gerar sinais de compra/venda
latest = hist.iloc[-1]
score = 50

if latest['RSI'] < 30: score += 20
elif latest['RSI'] > 70: score -= 20
if latest['MACD'] > latest['Signal']: score += 15
if latest['Close'] > latest['SMA_20']: score += 10
if latest['Close'] > latest['SMA_50']: score += 10

print(f"An√°lise para {ticker}")
print(f"Pre√ßo Atual: ${latest['Close']:.2f}")
print(f"RSI: {latest['RSI']:.2f}")
print(f"Score de Investimento: {score}/100")
print(f"Recomenda√ß√£o: {'COMPRA' if score >= 70 else 'AGUARDAR' if score >= 40 else 'VENDA'}")
</pre>
                </div>
            `;
            
            document.getElementById('results').innerHTML = resultsHTML;
        }
        
        function getRecommendation(score, strategy) {
            if (strategy === 'conservative') {
                if (score >= 80) return 'Momento excelente para entrada com baixo risco. Considere alocar 20-30% do capital dispon√≠vel.';
                if (score >= 50) return 'Aguarde melhores condi√ß√µes. Observe a tend√™ncia nos pr√≥ximos dias.';
                return 'Evite esta a√ß√£o no momento. Procure alternativas mais seguras.';
            } else if (strategy === 'moderate') {
                if (score >= 70) return 'Bom momento para entrada. Considere alocar 30-40% do capital com stop loss definido.';
                if (score >= 40) return 'Momento neutro. Pode entrar com posi√ß√£o pequena (10-20%) para teste.';
                return 'Sinal de venda. Considere realizar lucros ou cortar perdas.';
            } else {
                if (score >= 60) return 'Oportunidade de entrada agressiva. Pode alocar at√© 50% com gest√£o de risco ativa.';
                if (score >= 30) return 'Volatilidade presente. Ideal para day trade ou swing trade curto.';
                return 'Momento para opera√ß√£o vendida (short) ou aguardar revers√£o.';
            }
        }
        
        function getRiskAnalysis(rsi, macd, score) {
            let risk = 'M√©dio';
            if (score >= 70 && rsi < 50) risk = 'Baixo';
            else if (score < 40 || rsi > 70) risk = 'Alto';
            
            let analysis = `Risco ${risk}. `;
            if (rsi < 30) analysis += 'RSI indica sobrevenda, poss√≠vel revers√£o de alta. ';
            else if (rsi > 70) analysis += 'RSI indica sobrecompra, cuidado com corre√ß√£o. ';
            if (macd > 0) analysis += 'MACD positivo sugere for√ßa compradora. ';
            else analysis += 'MACD negativo sugere press√£o vendedora. ';
            
            return analysis + 'Sempre use stop loss e diversifique sua carteira.';
        }
        
        // Enter key para analisar
        document.getElementById('ticker').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') analyzeStock();
        });
    </script>
</body>
</html>